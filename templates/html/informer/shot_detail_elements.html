{% extends "informer/shot_detail_base.html" %}

{% block shot_title %}Elements{% endblock %}
{% block body_id %}elements{% endblock %}

{% block shot_content %}
        <div class="left">
          <div class="box medium">
              <h3>Check In New Element</h3>
              <form id="form-element-checkIn" action="#" method="post">
                  <a href="#" id="form-element-checkIn-file">Choose Files</a>
                  <p>
                      <strong>Category:</strong>
                      <select id="form-element-checkIn-cateogory">
                          <option selected="selected">Car</option>
                          <option>Boat</option>
                          <option>Truck</option>
                      </select> 
                      <input type="image" id="form-element-checkIn-submit" src="/media/images/button-checkIn.gif" />              
                  </p>
              </form>
              <div class="bottom">&nbsp;</div>
          </div>

          <div class="box medium">
          <h3>Elements Browser</h3>
          <ul class="heading" id="elements_heading">
            <li class="date down highlight" onclick="elements.resort_table('date'); highlightHeading(this,elements);">Date</li>
            <li class="checkedInBy" onclick="elements.resort_table('checkedInBy'); highlightHeading(this,elements);">Created by</li>
            <li class="category" onclick="elements.resort_table('category'); highlightHeading(this,elements);">Category</li>
          </ul>
          <ul class="entries" id="elements_entries">
          </ul>
            <div class="bottom">&nbsp;</div>
          </div>
        </div>
        <div class="right">
          <div class="box small">
            <h3>Category</h3>
            <ul id='filter_category'></ul>
            <div class="bottom"></div>            
          </div>
          <div class="box small">
            <h3>Created by</h3>
            <ul id='filter_checkedInBy'></ul>
            <div class="bottom"></div>            
          </div>
        </div>
        <div class="clear">&nbsp;</div>
      </div>
{% endblock %}

{% block shot_script %}
/* Elements functions
 * ------------------------------------------------------ */

/* called when page first loaded, initialize data */
function setup() {
    c_date      = new Informer.DateColumn('date', 'fields.created_on');
    c_author    = new Informer.UserColumn('checkedInBy', 'fields.created_by');
    c_category  = new Informer.TextColumn('category', 'fields.kind');
    c_text      = new Informer.TextColumn('text', 'fields.text');

    c_date.is_default = true;

    f_category  = new Informer.Filter(c_category);
    f_author    = new Informer.Filter(c_author); 

    var row_1   = [c_date, c_author, c_category];
    var filters = [f_category, f_author];

    elements = new Informer.Data('elements', row_1, c_text, filters);
    elements.generate_row = generate_row_double;
    elements.load_data({{ data }});
    elements.resort_table('date');
}

// onload trigger
setup();
{% endblock %}
